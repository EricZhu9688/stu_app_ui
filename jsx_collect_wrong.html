<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>错题采集</title>
    <script src="js/tailwind.min.js"></script>
    <script src="js/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
        }

        /* Sidebar Animation */
        .sidebar-enter {
            animation: slideInRight 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
            }

            to {
                transform: translateX(0);
            }
        }

        /* Custom Checkbox */
        .custom-checkbox {
            appearance: none;
            background-color: #fff;
            margin: 0;
            font: inherit;
            color: currentColor;
            width: 1.25em;
            height: 1.25em;
            border: 0.15em solid currentColor;
            border-radius: 50%;
            display: grid;
            place-content: center;
        }

        .custom-checkbox::before {
            content: "";
            width: 0.65em;
            height: 0.65em;
            transform: scale(0);
            transition: 120ms transform ease-in-out;
            box-shadow: inset 1em 1em white;
            transform-origin: center;
            clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
        }

        .custom-checkbox:checked {
            background-color: #09C0D7;
            border-color: #09C0D7;
        }

        .custom-checkbox:checked::before {
            transform: scale(1);
        }

        /* Hide Scrollbar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="p-0 m-0 bg-gray-50">
    <div class="min-h-screen pb-24 max-w-md mx-auto shadow-2xl relative bg-white">
        <!-- 1. Header -->
        <div class="bg-[#09C0D7] text-white p-4 pt-6 sticky top-0 z-20 shadow-md">
            <!-- Top Bar -->
            <div class="flex justify-between items-center mb-2">
                <button class="p-1 hover:bg-white/10 rounded-full transition-colors" onclick="window.history.back()">
                    <i data-lucide="chevron-left" class="w-6 h-6"></i>
                </button>
                <div class="text-base font-bold">收集错题</div>
                <div class="flex items-center bg-white/20 rounded-full px-2 py-1 gap-3">
                    <i data-lucide="more-horizontal" class="w-5 h-5"></i>
                    <div class="w-[1px] h-4 bg-white/30"></div>
                    <i data-lucide="minus" class="w-5 h-5"></i>
                    <div class="w-[1px] h-4 bg-white/30"></div>
                    <i data-lucide="disc" class="w-5 h-5"></i>
                </div>
            </div>

            <!-- Subject Switcher -->
            <div class="flex gap-3 mb-4 overflow-x-auto no-scrollbar pb-1">
                <button
                    class="px-4 py-1.5 rounded-full bg-white text-[#09C0D7] font-bold text-sm shadow-md whitespace-nowrap flex items-center gap-1">
                    <span>语文</span>
                    <span class="w-1.5 h-1.5 bg-red-500 rounded-full"></span>
                </button>
                <button
                    class="px-4 py-1.5 rounded-full bg-white/20 text-white font-medium text-sm hover:bg-white/30 whitespace-nowrap transition-colors">数学</button>
                <button
                    class="px-4 py-1.5 rounded-full bg-white/20 text-white font-medium text-sm hover:bg-white/30 whitespace-nowrap transition-colors">英语</button>
                <button
                    class="px-4 py-1.5 rounded-full bg-white/20 text-white font-medium text-sm hover:bg-white/30 whitespace-nowrap transition-colors">科学</button>
            </div>

            <!-- Lesson Info -->
            <div class="flex justify-between items-end">
                <div class="flex gap-3 items-center">
                    <div
                        class="bg-white text-[#09C0D7] w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg shadow-md">
                        语文
                    </div>
                    <div>
                        <div class="text-xs text-white/80 mb-0.5">基础性作业语文六年级上册</div>
                        <div class="text-lg font-bold flex items-center gap-2">
                            <span class="font-mono text-xl">1</span> 草原
                        </div>
                    </div>
                </div>
                <button onclick="toggleModal('lesson-sidebar')"
                    class="flex items-center gap-1 text-xs font-medium bg-white/10 px-3 py-1.5 rounded-lg hover:bg-white/20 transition-colors border border-white/20">
                    切换课时 <i data-lucide="list" class="w-3.5 h-3.5"></i>
                </button>
            </div>
        </div>

        <!-- 2. Toolbar -->
        <div class="bg-white sticky top-[156px] z-10 border-b border-gray-100">
            <!-- Mode Switcher -->
            <div class="flex justify-center pt-4 pb-2">
                <div class="bg-gray-100 p-1 rounded-lg flex text-sm font-medium">
                    <button
                        class="px-6 py-1.5 rounded-md bg-[#09C0D7] text-white shadow-sm transition-all">原图模式</button>
                    <button class="px-6 py-1.5 rounded-md text-gray-500 hover:bg-gray-200 transition-all">列表模式</button>
                </div>
            </div>
            <!-- Select All -->
            <div class="px-4 py-3 flex items-center gap-2">
                <label class="flex items-center gap-2 cursor-pointer select-none">
                    <input type="checkbox" class="custom-checkbox text-gray-300" id="select-all">
                    <span class="text-sm text-gray-600">全选 (已选: <span id="selected-count"
                            class="font-bold text-gray-800">1</span>/17)</span>
                </label>
            </div>
        </div>

        <!-- 3. Content -->
        <div class="p-4 space-y-4 bg-gray-50 min-h-[500px]">
            <!-- Page 1 -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden relative group">
                <div class="relative">
                    <div class="bg-[#09C0D7] text-white px-4 py-2 text-lg font-bold w-1/3 rounded-br-3xl">第一单元</div>
                    <div class="text-center py-4 text-2xl font-serif text-gray-700">1 草原</div>

                    <!-- Questions (Mock) -->
                    <div class="relative p-2">
                        <div class="border-2 border-transparent hover:border-[#09C0D7]/30 rounded-lg transition-colors cursor-pointer"
                            onclick="toggleSelection(1)">
                            <img src="https://placehold.co/600x150/f3f4f6/9ca3af?text=Question+1:+Reading+Check"
                                class="w-full rounded-md opacity-90">
                            <div id="overlay-1"
                                class="absolute inset-0 bg-[#09C0D7]/10 border-2 border-[#09C0D7] rounded-lg flex items-center justify-center hidden">
                                <div class="bg-[#09C0D7] text-white rounded-full p-1 shadow-lg"><i data-lucide="check"
                                        class="w-6 h-6"></i></div>
                            </div>
                        </div>
                    </div>
                    <!-- Question 2 -->
                    <div class="relative p-2">
                        <div class="border-2 border-transparent hover:border-[#09C0D7]/30 rounded-lg transition-colors cursor-pointer"
                            onclick="toggleSelection(2)">
                            <div class="bg-cyan-50/50 p-4 rounded-lg border border-cyan-100">
                                <div class="text-cyan-800 font-bold mb-2">二、读一读，填写词语。</div>
                                <div class="text-sm text-gray-600 leading-loose">
                                    草原原来是一块无边的 <span class="border-b border-gray-300 px-4"></span> ( )。羊群 <span
                                        class="border-b border-gray-300 px-4"></span> ( ) 地吃着草...
                                </div>
                            </div>
                            <div id="overlay-2"
                                class="absolute inset-0 bg-[#09C0D7]/10 border-2 border-[#09C0D7] rounded-lg flex items-center justify-center">
                                <div class="bg-[#09C0D7] text-white rounded-full p-1 shadow-lg"><i data-lucide="check"
                                        class="w-6 h-6"></i></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Pagination -->
            <div class="flex justify-center gap-2 py-4">
                <button class="w-8 h-8 rounded-lg bg-[#09C0D7] text-white font-bold text-sm shadow-md">1</button>
                <button
                    class="w-8 h-8 rounded-lg bg-white text-gray-600 border border-gray-200 font-bold text-sm hover:bg-gray-50">2</button>
            </div>
        </div>

        <!-- 4. Footer -->
        <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 p-4 pb-6 z-30 max-w-md mx-auto">
            <div class="flex gap-3">
                <button
                    class="flex-1 py-3 rounded-xl border border-gray-200 text-gray-500 font-bold text-sm hover:bg-gray-50 transition-colors">《上一课时</button>
                <button
                    class="flex-1 py-3 rounded-xl bg-[#09C0D7] text-white font-bold text-sm shadow-lg shadow-cyan-100 hover:bg-[#08acc0] transition-colors">保存错题(2)</button>
                <button
                    class="flex-1 py-3 rounded-xl border border-gray-200 text-gray-500 font-bold text-sm hover:bg-gray-50 transition-colors">下一课时》</button>
            </div>
        </div>

        <!-- Sidebar Navigation -->
        <div id="lesson-sidebar" class="fixed inset-0 z-50 hidden">
            <div class="absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity"
                onclick="toggleModal('lesson-sidebar')"></div>
            <div
                class="absolute top-0 right-0 bottom-0 w-[85%] max-w-xs bg-white shadow-2xl sidebar-enter flex flex-col">
                <!-- Sidebar Header -->
                <div class="p-5 border-b border-gray-100 bg-gray-50/50">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-lg font-bold text-gray-800">切换课时</h3>
                        <button onclick="toggleModal('lesson-sidebar')"
                            class="p-1 hover:bg-gray-100 rounded-full text-gray-400">
                            <i data-lucide="x" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <div class="text-xs text-gray-500">当前: 基础性作业语文六年级上册</div>
                </div>
                <!-- Sidebar List -->
                <div class="flex-1 overflow-y-auto p-4 space-y-6">
                    <!-- Unit 1 -->
                    <div>
                        <div
                            class="flex items-center gap-2 text-gray-400 text-xs font-bold uppercase tracking-wider mb-3 px-2">
                            第一单元
                            <div class="h-[1px] flex-1 bg-gray-100"></div>
                        </div>
                        <div class="space-y-2">
                            <!-- Active Lesson -->
                            <div onclick="switchLesson('1 草原')"
                                class="relative p-3 rounded-xl bg-[#09C0D7]/5 border border-[#09C0D7] cursor-pointer group">
                                <div class="flex justify-between items-start">
                                    <div class="flex items-center gap-3">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#09C0D7]"></div>
                                        <div>
                                            <div class="text-[#09C0D7] font-bold text-sm">1 草原</div>
                                            <div class="text-[10px] text-[#09C0D7]/70 mt-0.5">当前所在课时</div>
                                        </div>
                                    </div>
                                    <i data-lucide="check" class="w-4 h-4 text-[#09C0D7]"></i>
                                </div>
                            </div>
                            <!-- Unfinished Lesson -->
                            <div onclick="switchLesson('2 丁香结')"
                                class="relative p-3 rounded-xl border border-gray-100 hover:border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center gap-3">
                                        <div class="w-1.5 h-1.5 rounded-full bg-transparent"></div>
                                        <div class="text-gray-600 font-medium text-sm">2 丁香结</div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span
                                            class="bg-red-100 text-red-500 text-[10px] px-1.5 py-0.5 rounded-md font-bold">未完成</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Normal Lesson -->
                            <div onclick="switchLesson('3 古诗词三首')"
                                class="relative p-3 rounded-xl border border-gray-100 hover:border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center gap-3">
                                        <div class="w-1.5 h-1.5 rounded-full bg-transparent"></div>
                                        <div class="text-gray-600 font-medium text-sm">3 古诗词三首</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Save Modal -->
        <div id="save-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center">
            <div class="absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity"
                onclick="toggleModal('save-modal')"></div>
            <div class="relative w-[80%] max-w-sm bg-white rounded-2xl p-6 fade-in shadow-2xl">
                <div class="text-center">
                    <h3 class="text-lg font-bold text-gray-800 mb-2">
                        您已选择 <span class="text-orange-500 text-xl">1</span> 道错题，点击【确定】后，将保存至错题集并立即跳转。
                    </h3>
                    <div class="flex gap-3 mt-6">
                        <button onclick="toggleModal('save-modal')"
                            class="flex-1 py-2.5 rounded-lg border border-gray-200 text-gray-500 font-bold text-sm hover:bg-gray-50">取消</button>
                        <button onclick="alert('保存成功！')"
                            class="flex-1 py-2.5 rounded-lg bg-[#09C0D7] text-white font-bold text-sm shadow-lg shadow-cyan-100 hover:bg-[#08acc0]">确定</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            lucide.createIcons();
            window.toggleModal = function (modalId) {
                const modal = document.getElementById(modalId);
                if (modal.classList.contains('hidden')) {
                    modal.classList.remove('hidden');
                } else {
                    modal.classList.add('hidden');
                }
            }
            window.toggleSelection = function (id) {
                const overlay = document.getElementById(`overlay-${id}`);
                overlay.classList.toggle('hidden');
                updateCount();
            }
            function updateCount() {
                const count = document.querySelectorAll('[id^="overlay-"]:not(.hidden)').length;
                document.getElementById('selected-count').innerText = count;
                const modalSpan = document.querySelector('#save-modal span.text-orange-500');
                if (modalSpan) modalSpan.innerText = count;
            }
            window.switchLesson = function (lessonName) {
                // Mock switching logic
                toggleModal('lesson-sidebar');
                // In a real app, this would navigate or reload content
                console.log('Switched to: ' + lessonName);
                // Update the header text to simulate change
                const headerTitle = document.querySelector('.text-lg.font-bold.flex.items-center.gap-2');
                if (headerTitle) {
                    headerTitle.innerHTML = `<span class="font-mono text-xl">${lessonName.split(' ')[0]}</span> ${lessonName.split(' ')[1] || ''}`;
                }
            }
        </script>
    </div>
</body>

</html>