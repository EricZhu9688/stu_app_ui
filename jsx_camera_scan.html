<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拍照识别</title>
    <script src="js/tailwind.min.js"></script>
    <script src="js/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            overflow: hidden;
        }

        /* 扫描线动画 */
        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: #09C0D7;
            box-shadow: 0 0 4px #09C0D7;
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            0% { top: 0; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        /* 扫描框四角 */
        .corner {
            position: absolute;
            width: 20px;
            height: 20px;
            border-color: white;
            border-style: solid;
        }
        .tl { top: 0; left: 0; border-width: 3px 0 0 3px; border-radius: 4px 0 0 0; }
        .tr { top: 0; right: 0; border-width: 3px 3px 0 0; border-radius: 0 4px 0 0; }
        .bl { bottom: 0; left: 0; border-width: 0 0 3px 3px; border-radius: 0 0 0 4px; }
        .br { bottom: 0; right: 0; border-width: 0 3px 3px 0; border-radius: 0 0 4px 0; }
        
        /* Modal Animation */
        .modal-enter {
            animation: modalUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        
        @keyframes modalUp {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
    </style>
</head>

<body class="text-white">

    <div class="max-w-md mx-auto h-screen relative flex flex-col">
        
        <!-- 模拟相机预览背景 (图片或纯色) -->
        <div class="absolute inset-0 bg-gray-900 z-0">
            <!-- 实际开发中这里是 video 标签 -->
            <!-- 这里用一个模糊图片模拟环境 -->
            <img src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=1770&q=80" class="w-full h-full object-cover opacity-30">
        </div>

        <!-- 顶部操作栏 -->
        <div class="relative z-10 flex justify-between items-center p-4 pt-8">
            <button onclick="history.back()" class="p-2 bg-black/20 backdrop-blur-md rounded-full hover:bg-black/40">
                <i data-lucide="x" class="w-6 h-6 text-white"></i>
            </button>
            <div class="flex items-center gap-2 bg-black/40 backdrop-blur-md px-3 py-1 rounded-full cursor-pointer">
                <i data-lucide="play-circle" class="w-4 h-4 text-white"></i>
                <span class="text-xs font-medium">示例</span>
            </div>
            <div class="w-10"></div> <!-- 占位 -->
        </div>

        <!-- 中间扫描区 -->
        <div class="relative z-10 flex-1 flex flex-col items-center justify-center">
            <div class="w-64 h-40 relative">
                <!-- 四角 -->
                <div class="corner tl"></div>
                <div class="corner tr"></div>
                <div class="corner bl"></div>
                <div class="corner br"></div>
                <!-- 扫描线 -->
                <div class="scan-line"></div>
                
                <!-- 提示文字 -->
                <div class="absolute -bottom-16 w-full text-center">
                    <p class="text-sm font-medium text-white/90 drop-shadow-md">
                        将激活卡号和密码至于此区域
                    </p>
                    <p class="text-xs text-white/60 mt-1 drop-shadow-md">
                        并对齐边缘，点击下方按钮拍照识别
                    </p>
                </div>
            </div>
        </div>

        <!-- 底部操作栏 -->
        <div class="relative z-10 pb-12 px-8 flex justify-between items-center bg-gradient-to-t from-black/80 to-transparent pt-20">
            <button class="flex flex-col items-center gap-1 text-white/80 hover:text-white">
                <div class="w-10 h-10 rounded-full bg-black/30 flex items-center justify-center border border-white/20">
                    <i data-lucide="image" class="w-5 h-5"></i>
                </div>
                <span class="text-[10px]">相册</span>
            </button>

            <!-- 拍照按钮 -->
            <button class="w-16 h-16 rounded-full bg-white border-4 border-[#09C0D7]/30 flex items-center justify-center active:scale-95 transition-transform" onclick="takePhoto()">
                <div class="w-14 h-14 rounded-full bg-[#09C0D7] flex items-center justify-center shadow-lg shadow-cyan-500/50">
                    <i data-lucide="camera" class="w-7 h-7 text-white"></i>
                </div>
            </button>

            <button class="flex flex-col items-center gap-1 text-white/80 hover:text-white">
                <div class="w-10 h-10 rounded-full bg-black/30 flex items-center justify-center border border-white/20">
                    <i data-lucide="flashlight" class="w-5 h-5"></i>
                </div>
                <span class="text-[10px]">打开</span>
            </button>
        </div>

    </div>

    <!-- 引导遮罩弹窗 -->
    <div id="guide-modal" class="fixed inset-0 z-50 flex items-center justify-center">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
        
        <div class="relative z-10 bg-white rounded-2xl p-6 w-[85%] max-w-sm modal-enter flex flex-col items-center text-gray-800">
            <!-- 引导图示 -->
            <div class="bg-blue-50/50 rounded-xl p-4 w-full mb-6 border border-blue-100">
                <div class="flex items-start gap-3 mb-4 opacity-50">
                    <span class="bg-blue-100 text-blue-600 text-[10px] font-bold px-2 py-0.5 rounded-full">第一步</span>
                    <p class="text-xs text-gray-500">找到书本背后的激活卡</p>
                </div>
                
                <div class="flex items-start gap-3 mb-4 opacity-50">
                    <span class="bg-blue-100 text-blue-600 text-[10px] font-bold px-2 py-0.5 rounded-full">第二步</span>
                    <p class="text-xs text-gray-500">刮开涂层获取卡号密码</p>
                </div>

                <div class="flex items-start gap-3 bg-white p-3 rounded-lg shadow-sm border border-blue-200">
                    <span class="bg-[#09C0D7] text-white text-[10px] font-bold px-2 py-0.5 rounded-full whitespace-nowrap">第三步</span>
                    <div>
                        <p class="text-xs font-bold text-gray-800 mb-2">将激活卡对准扫描框</p>
                        <!-- 模拟卡片 -->
                        <div class="bg-gray-100 border border-gray-300 rounded p-2 text-[10px] font-mono text-gray-600 w-full relative overflow-hidden">
                            <div class="mb-1">卡号: ASDFGHJ4UF8...</div>
                            <div>密码: 123456</div>
                            <!-- 模拟扫描框叠加 -->
                            <div class="absolute inset-0 border-2 border-[#09C0D7] rounded-sm animate-pulse opacity-60"></div>
                        </div>
                    </div>
                </div>
            </div>

            <p class="text-sm text-gray-500 text-center mb-6 px-4">
                刮开涂层后，将激活卡卡号与密码置于拍摄框内，点击底部「拍照」按钮识别。
            </p>

            <button onclick="closeGuide()" class="w-full py-3 rounded-full bg-[#09C0D7] text-white font-bold text-sm shadow-lg shadow-cyan-100 hover:bg-[#08acc0] active:scale-[0.98] transition-all">
                学会了，去拍照
            </button>
        </div>
    </div>

    <script>
        lucide.createIcons();

        function closeGuide() {
            const modal = document.getElementById('guide-modal');
            modal.style.transition = 'opacity 0.3s';
            modal.style.opacity = '0';
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }

        function takePhoto() {
            // 模拟拍照后返回填入数据
            // 这里简单模拟延时后返回上一页
            const btn = document.querySelector('button[onclick="takePhoto()"] div');
            btn.innerHTML = '<div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>';
            
            setTimeout(() => {
                alert('识别成功！模拟填充数据...');
                history.back();
            }, 1000);
        }
    </script>
</body>
</html>